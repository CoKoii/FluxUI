{"version":3,"file":"index.js","sources":["../src/tokens/gap.ts","../src/tokens/font.ts","../src/tokens/motion.ts","../src/tokens/border.ts","../src/themes/light.ts","../src/themes/dark.ts","../src/applyTheme.ts","../src/index.ts"],"sourcesContent":["import type { GapTokens } from \"../types\";\n\nexport const gap: GapTokens = {\n  4: \"4px\",\n  6: \"6px\",\n  8: \"8px\",\n  12: \"12px\",\n  16: \"16px\",\n  20: \"20px\",\n  24: \"24px\",\n};\n","import type { FontTokens } from \"../types\";\n\nexport const font: FontTokens = {\n  family: [\n    \"system-ui\",\n    \"-apple-system\",\n    \"BlinkMacSystemFont\",\n    '\"Segoe UI\"',\n    \"Roboto\",\n    '\"Helvetica Neue\"',\n    \"Arial\",\n    '\"Noto Sans\"',\n    '\"PingFang SC\"',\n    '\"Microsoft YaHei\"',\n    \"sans-serif\",\n  ].join(\", \"),\n  weight100: 100,\n  weight200: 200,\n  weight300: 300,\n  weight400: 400,\n  weight500: 500,\n  weight600: 600,\n  weight700: 700,\n  weight800: 800,\n  weight900: 900,\n  size12: \"12px\",\n  size13: \"13px\",\n  size14: \"14px\",\n  size16: \"16px\",\n  size20: \"20px\",\n};\n","import type { MotionTokens } from \"../types\";\n\nexport const motion: MotionTokens = {\n  transition: {\n    \"300ease\": \"0.3s ease\",\n  },\n};\n","import type { BorderTokens } from \"../types\";\n\nexport const border: BorderTokens = {\n  solid_1: \"1px solid\",\n};\n","import type { Theme } from \"../types\";\nimport { baseColors } from \"../tokens/colors\";\nimport { radius } from \"../tokens/radius\";\nimport { padding } from \"../tokens/padding\";\nimport { shadows } from \"../tokens/shadows\";\nimport { gap } from \"../tokens/gap\";\nimport { font } from \"../tokens/font\";\nimport { motion } from \"../tokens/motion\";\nimport { border } from \"../tokens/border\";\n\nexport const lightTheme: Theme = {\n  name: \"light\",\n  tokens: {\n    colors: { ...baseColors },\n    radius,\n    padding,\n    shadows,\n    gap,\n    font,\n    motion,\n    border,\n  },\n};\n","import type { Theme } from \"../types\";\nimport { radius } from \"../tokens/radius\";\nimport { padding } from \"../tokens/padding\";\nimport { shadows } from \"../tokens/shadows\";\nimport { darkColors } from \"../tokens/colors-dark\";\nimport { gap } from \"../tokens/gap\";\nimport { font } from \"../tokens/font\";\nimport { motion } from \"../tokens/motion\";\nimport { border } from \"../tokens/border\";\n\nexport const darkTheme: Theme = {\n  name: \"dark\",\n  tokens: {\n    colors: { ...darkColors },\n    radius,\n    padding,\n    shadows,\n    gap,\n    font,\n    motion,\n    border,\n  },\n};\n","import type { Theme, ThemeMode, ApplyThemeOptions } from \"./types\";\n\nexport const DEFAULT_PREFIX = \"--fl\";\nexport const DEFAULT_ATTRIBUTE = \"fl-data-theme\";\n\nconst toKebabCase = (str: string) =>\n  str.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nconst isObject = (val: unknown): val is Record<string, unknown> =>\n  val !== null && typeof val === \"object\" && !Array.isArray(val);\n\ntype TokenMap = Record<string, string>;\n\nfunction flattenTokens(tokens: unknown, prefix: string, path = \"\", out: TokenMap = {}): TokenMap {\n  for (const [key, value] of Object.entries(\n    tokens as Record<string, unknown>\n  )) {\n    const tokenPath = path ? `${path}-${toKebabCase(key)}` : toKebabCase(key);\n    if (isObject(value)) {\n      flattenTokens(value, prefix, tokenPath, out);\n    } else {\n      out[`${prefix}-${tokenPath}`] = String(value);\n    }\n  }\n  return out;\n}\n\nconst styleCache = new Map<string, { cssText: string; style: HTMLStyleElement }>();\n\nfunction resolveTarget(target?: HTMLElement): HTMLElement | undefined {\n  return target ?? (typeof document === \"undefined\" ? undefined : document.documentElement);\n}\n\nexport function applyTheme(\n  theme: Theme,\n  target?: HTMLElement,\n  options: ApplyThemeOptions = {}\n) {\n  const { prefix = DEFAULT_PREFIX, attribute = DEFAULT_ATTRIBUTE } = options;\n  const resolvedTarget = resolveTarget(target);\n  if (!resolvedTarget) return;\n\n  const variables = flattenTokens(theme.tokens, prefix);\n  const cssText = `[${attribute}=\"${theme.name}\"]{${Object.entries(variables)\n    .map(([name, value]) => `${name}: ${value};`)\n    .join(\"\")}}`;\n\n  if (typeof document !== \"undefined\") {\n    const key = `${prefix}|${attribute}|${theme.name}`;\n    const cached = styleCache.get(key);\n    if (!cached || cached.cssText !== cssText) {\n      const styleEl = cached?.style ?? document.createElement(\"style\");\n      if (!cached) {\n        styleEl.setAttribute(\"data-fluxuijs-theme\", key);\n        document.head.appendChild(styleEl);\n      }\n      styleEl.textContent = cssText;\n      styleCache.set(key, { cssText, style: styleEl });\n    }\n  }\n\n  for (const name of Object.keys(variables)) {\n    resolvedTarget.style.removeProperty(name);\n  }\n  resolvedTarget.setAttribute(attribute, theme.name);\n}\n\nexport function getThemeMode(target?: HTMLElement): ThemeMode {\n  const resolvedTarget = resolveTarget(target);\n  if (!resolvedTarget) return \"light\";\n  return resolvedTarget.getAttribute(DEFAULT_ATTRIBUTE) === \"dark\"\n    ? \"dark\"\n    : \"light\";\n}\n\nexport function isDark(target?: HTMLElement): boolean {\n  return getThemeMode(target) === \"dark\";\n}\n","export * from \"./types\";\nexport * from \"./themes\";\nexport * from \"./applyTheme\";\nexport * as tokens from \"./tokens\";\n\nimport { lightTheme } from \"./themes\";\nimport { applyTheme } from \"./applyTheme\";\n\nif (typeof window !== \"undefined\" && typeof document !== \"undefined\") {\n  applyTheme(lightTheme);\n}\n"],"names":["gap","font","motion","border","lightTheme","baseColors","radius","padding","shadows","darkTheme","darkColors","DEFAULT_PREFIX","DEFAULT_ATTRIBUTE","toKebabCase","str","isObject","val","flattenTokens","tokens","prefix","path","out","key","value","tokenPath","styleCache","resolveTarget","target","applyTheme","theme","options","attribute","resolvedTarget","variables","cssText","name","cached","styleEl","getThemeMode","isDark"],"mappings":"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"}